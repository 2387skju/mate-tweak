#! @PYTHON@ @PYOPTIONS@
# -*- python -*-
# -*- coding: utf-8 -*-
#   MateTweak
#
#   This library is free software; you can redistribute it and/or
#   modify it under the terms of the GNU Library General Public
#   License as published by the Free Software Foundation; either
#   version 2 of the License, or (at your option) any later version.
#
#   This library is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#   Library General Public License for more details.
#
#   You should have received a copy of the GNU Library General Public
#   License along with this library; if not, write to the Free Software
#   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

### this import / require_version / main() part is just copied from MainWindow and in redundant (start1/1)
# maybe it is a good idea to delete this parts in MainWindow now?
import argparse
import distro
import errno
import gettext
import getpass
import gi
import glob
import mmap
import os
import psutil
import setproctitle
import shutil
import signal
import subprocess
import sysconfig
import string
import sys
import time

from subprocess import DEVNULL, PIPE

from gi.repository import GLib

gi.require_version('Gdk', '3.0')
from gi.repository import Gdk
from gi.repository import GdkPixbuf

gi.require_version('GdkX11', '3.0')
from gi.repository import GdkX11
from gi.repository import Gio
from gi.repository import GObject

gi.require_version('Gtk', '3.0')
from gi.repository import Gtk

gi.require_version('Notify', '0.7')
from gi.repository import Notify
### this import / require_version / main() part is just copied from MainWindow and in redundant (end1/1)

import MateTweak
from MateTweak.MainWindow import MateTweak

def main():
    try:
        from MateTweak import config
        datadir = config.pkgdatadir
        version = config.VERSION
    except:
        datadir = './data/'
        version = '22.10.0'
#just copyed from mozo; can deleted:    app = MainWindow(datadir, version, sys.argv)
#just copyed from mozo; can deleted:    app.run()

### this import / require_version / main() part is just copied from MainWindow and in redundant (start2/2)
# maybe it is a good idea to delete this parts in MainWindow now?
    setproctitle.setproctitle('mate-tweak')

    parser = argparse.ArgumentParser()
    parser.add_argument('--layout', help="Switch to a panel layout")
    parser.add_argument('--get-layout', action='store_true', help="Get the current panel layout")
    args = parser.parse_args()

    # If we've been given a layout then attempt to switch layouts.
    if args.layout:
        mt = MateTweak()
        if mt.panel_layout_exists(args.layout):
            mt.replace_panel_layout(args.layout, True)
        else:
            print("ERROR! Unable to find layout: " + args.layout)
    elif args.get_layout:
        mt = MateTweak()
    else:
        MateTweak()
        Gtk.main()
### this import / require_version / main() part is just copied from MainWindow and in redundant (end2/2)

if __name__ == '__main__':
    main()

